<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/product.css">
</head>

<body>
   <%- include('../includes/navigation.ejs') %>

    <main>
        <div class="container">
            <div class="row">
                <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                    <div class="card card-auth my-5">
                        <div class="card-body">
                            <h5 class="card-title text-center"><% if (editing) { %>Edit product<% } else { %>Add product<% } %></h5>
                            <% if (errorMessage) { %>
                                <div class="alert alert-danger" role="alert"><%= errorMessage %></div>
                            <% } %>
                            <form action="/<% if (editing) { %>edit-product?edit=true<% } else { %>add-product<% } %>" method="POST">
                                <div class="form-label-group">
                                
                                    <input type="text" name="title" class="form-control" 
                                      placeholder="Product title" id="title"
                                      value="<% if (product) { %><%= product.title %><% } %>"
                                      required autofocus>
                                    <label for="title">Product title</label>
                                </div>

                                <div class="form-label-group">
                                    <input type="text" name="imageUrl" class="form-control" 
                                    placeholder="Product image" id="imageUrl" 
                                    value="<% if (product) { %><%= product.imageUrl %><% } %>"
                                    required>
                                    <label for="imageUrl">Image URL</label>
                                </div>

                                <div class="form-label-group">
                                    <input type="number" name="price" id="price"
                                     step="0.01"  placeholder="10.00" class="form-control" 
                                     value="<% if (product) { %><%= product.price %><% } %>"
                                     required>
                                    <label for="price">Price</label>
                                </div>

                                <div class="form-label-group">
                                    <textarea name="description" id="description" class="form-control" 
                                        rows="5" placeholder="Description"
                                        style="resize: none;"><% if (product) { %><%= product.description %><% } %></textarea>
                                </div>

                                <% if (editing) { %>
                                    <input type="hidden" value="<%= product.id %>" name="productId">
                                <% } %>
                                <button class="btn btn-lg btn-primary btn-block" type="submit">
                                    <% if (editing) { %>Update Product<% } else { %>Add Product<% } %>
                                </button>
                                <a href="/" class="btn btn btn-block btn-link" >Return to shop</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
<%- include('../includes/end.ejs') %>